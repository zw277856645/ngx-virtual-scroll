<!-- 仅用于撑开高度 -->
<div class="total-height" #totalHeight></div>

<!-- 占位符渲染模板 -->
<ng-template #placeholderTemplate let-height>

</ng-template>

<!-- 切换占位符/真实条目 -->
<ng-template #itemWrapperTemplate let-item>
  <ng-container *ngIf="item[ITEM_VISIBLE_KEY]; else placeholderRenderTemplate">
    <ng-template [ngTemplateOutlet]="itemRender"
                 [ngTemplateOutletContext]="{$implicit:item}"></ng-template>
  </ng-container>
  <ng-template #placeholderRenderTemplate
               [ngTemplateOutlet]="placeholderTemplate"
               [ngTemplateOutletContext]="{$implicit:item.itemHeight}"></ng-template>
</ng-template>

<div class="items-container" #itemsContainer>
  <div class="item">1</div>
  <ng-container *ngFor="let item of viewPortItems;trackBy:trackByItems;index as i;count as ct">
    <ng-template [ngTemplateOutlet]="itemWrapperTemplate"
                 [ngTemplateOutletContext]="{$implicit:createItemRenderContext(item,i,ct)}"></ng-template>
  </ng-container>
</div>